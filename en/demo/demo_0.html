<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title></title>
<link rel="stylesheet" type="text/css" href="http://www.nodetpl.com/static/css/vdialog.css">
<script src="http://www.nodetpl.com/static/js/lib/nodetpl.min.js"></script>
<!--[if lt IE 9]><script type="text/javascript" src="http://www.nodetpl.com/static/js/html5shiv.js"></script><![endif]-->
<script src="http://www.nodetpl.com/static/js/lib/es5-shim.min.js"></script>
<style>
body{
  padding-bottom: 2em;
}
section{
  width: 600px;
  margin: 20px auto;
}
footer{
  color: #999;
  font-size: 12px;
  position: fixed;
  background-color: #eee;
  bottom: 0;
  left: 0;
  width: 100%;
  text-align: center;
}
footer a{
  color: #999;
}
h4 span{
  color: #666;
  margin-left: 1em;
  font-weight: normal;
  font-size: .8em;
}
textarea{
  font-size: 12px;
  width: 500px;
  height: 100px;
}
#code-template{
  height: 220px;
}
a, a:hover {
  color: #4078c0;
}
a.btn {
  display: inline-block;
  vertical-align: middle;
  margin-right: 1em;
  font-size: 14px;
  line-height: 26px;
  border-radius: 3px;
  padding: 0 1em;
  color: #333;
  padding-top: 2px;
  text-decoration: none;
  border: 1px solid #ccc;
}
</style>
</head>
<body>
<section>
  <h2>NodeTpl Template Engine Code DIY</h2>
  <h4>Data</h4>
  <textarea id="code-data">{
  "user": "Tom",
  "title": "Favor",
  "favor": [ "Football", "Basketball", "Table tennis", "Glass ball." ]
}</textarea>
  <h4>Template</h4>
  <textarea id="code-template">&lt;style&gt;
  h1 {
    font-size: 20px;
    color: #f00;
  }
  p {
    text-indent: 2em;
  }
&lt;/style&gt;
&lt;div id="$ROOT"&gt;
  &lt;h1&gt;&lt;?=@title?&gt;&lt;/h1&gt;
  &lt;?if(@user !== ''){?&gt;
    &lt;?=@user?&gt;
  &lt;?} else {?&gt;
    New friend
  &lt;?}?&gt;
  Hello, your favor is:
  &lt;?for(var i=0; i<10; i++){?&gt;
    &lt;p&gt;hello, world, the &lt;?=i?&gt;&lt;/p&gt;
  &lt;?}?&gt;
&lt;/div&gt;</textarea>
  <p><a class="btn" id="btn-run">Run</a><a href="http://www.nodetpl.com/">Home</a></p>
</section>
<script src="http://www.nodetpl.com/static/js/lib/jquery-1.10.2.js"></script>
<script src="http://www.nodetpl.com/static/js/lib/vDialog.min.js"></script>
<script>
$('#btn-run').on('click', function(){
  var data = $('#code-data').val().trim();
  var template = $('#code-template').val().trim();
  if(data && template){
    try {
      data = JSON.parse(data);
      nodetpl.render(template, data, function(d){
        vDialog({
          title: 'Result',
          content: d,
          width: 400,
          ok: true,
          okValue: 'Ok'
        }).showModal();
        console.log(d);
      });
    } catch(e){
      vDialog.error(e);
    }
  }
});
</script>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?55310397b78e4d3793e8b32711e7c487";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
</body>
</html>