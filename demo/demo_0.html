<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title></title>
<link rel="stylesheet" type="text/css" href="http://www.nodetpl.com/static/css/vdialog.css">
<script src="http://www.nodetpl.com/static/js/lib/nodetpl.client.min.js"></script>
<!--[if lt IE 9]><script type="text/javascript" src="http://www.nodetpl.com/static/js/html5shiv.js"></script><![endif]-->
<script src="http://www.nodetpl.com/static/js/lib/es5-shim.min.js"></script>
<style>
h4 span{
  color: #666;
  margin-left: 1em;
  font-weight: normal;
  font-size: .8em;
}
textarea{
  width: 500px;
  height: 150px;
}
a.btn {
  display: inline-block;
  vertical-align: middle;
  margin-right: 1em;
  font-size: 14px;
  line-height: 26px;
  border-radius: 3px;
  padding: 0 1em;
  color: #333;
  padding-top: 2px;
  text-decoration: none;
  border: 1px solid #ccc;
}
</style>
</head>
<body>
<h4>数据<span>请按严格模式书写 JSON，key 要使用双引号引起来</span></h4>
<textarea id="code-data">{
  "name": "zhangsan"
}</textarea>
<h4>模板</h4>
<textarea id="code-template">&lt;?if(name === "zhangsan"){?&gt;
  &lt;?=name?&gt;
&lt;?} else {?&gt;
  姓名不是 zhangsan
&lt;?}?&gt;</textarea>
<p><a class="btn" id="btn-run">运行</a></p>

<script src="http://www.nodetpl.com/static/js/lib/jquery-1.10.2.js"></script>
<script src="http://www.nodetpl.com/static/js/lib/vDialog.min.js"></script>
<script>
$('#btn-run').on('click', function(){
  var data = $('#code-data').val().trim();
  var template = $('#code-template').val().trim();
  if(data && template){
    try {
      data = JSON.parse(data);
      nodetpl.render(template, data, function(d){
        vDialog({
          title: '运行结果',
          content: d,
          width: 400,
          ok: true
        }).showModal();
        console.log(d);
      });
    } catch(e){
      vDialog.error(e);
    }
  }
});
</script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?55310397b78e4d3793e8b32711e7c487";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
</body>
</html>